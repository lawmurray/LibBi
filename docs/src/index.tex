\documentclass[a4paper,notitlepage]{refrep}

%\usepackage{fullpage}
\usepackage[round,comma,authoryear]{natbib}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{alltt}
%\usepackage{html}
\usepackage{hyperref}
\usepackage{makeidx}
\usepackage{lmodern} % vertically centres tilde in code
%\usepackage{textcomp}
\usepackage{microtype}
%\usepackage{fancybox}
%\usepackage{fancyvrb}
%\usepackage{titling}
\usepackage{color}
\usepackage{framed}
\usepackage{mdframed}
\usepackage{relsize}
\usepackage{mathpazo}
\usepackage[T1]{fontenc}

% include citations in index
%\citeindextrue

% font adjustments
\def\bs{\char'134 } % backslash in \tt font.
% Prevents `--' in command-line options being interpreted as en-dash ligatures
\DisableLigatures{family=tt*}

\definecolor{shadecolor}{gray}{0.9}

% new commands (\begingroup ... \endgroup for accepting arguments with _)
\newcommand\bitt[1]{\texttt{#1}}

\newcommand\kwref{\begingroup \catcode`_=12 \dokwref}
\newcommand\dokwref[1]{\hyperref[#1]{\bitt{#1}}\index{#1}\endgroup}

\newcommand\actionref{\begingroup \catcode`_=12 \doactionref}
\newcommand\doactionref[1]{\hyperref[action_#1]{\bitt{#1}}\index{#1}\endgroup}

\newcommand\blockref{\begingroup \catcode`_=12 \doblockref}
\newcommand\doblockref[1]{\hyperref[block_#1]{\bitt{#1}}\index{#1}\endgroup}

\newcommand\clientref{\begingroup \catcode`_=12 \doclientref}
\newcommand\doclientref[1]{\hyperref[client_#1]{\bitt{#1}}\index{#1}\endgroup}

\newcommand\secref{\begingroup \catcode`_=12 \dosecref}
\newcommand\dosecref[2]{\hyperref[#1]{#2}\endgroup}

\newcommand\newseealso{\begingroup \catcode`_=12 \donewseealso}
\newcommand\donewseealso[1]{\seealso{#1}\endgroup}

\makeatletter
\newcommand*{\toccontents}{\@starttoc{toc}}
\makeatother

% new environments
\newenvironment{bicode}
{\begin{mdframed}[linewidth=0,backgroundcolor=shadecolor,skipabove=\baselineskip,innertopmargin=0]\begin{minipage}{\textwidth}\begin{alltt}\relsize{-0.5}}
{\end{alltt}\end{minipage}\end{mdframed}}

\newenvironment{cppcode}
{\begin{mdframed}[linewidth=0,backgroundcolor=shadecolor,skipabove=\baselineskip,innertopmargin=0]\begin{minipage}{\textwidth}\begin{alltt}}
{\end{alltt}\end{minipage}\end{mdframed}}

\newenvironment{cmdcode}
{\begin{mdframed}[linewidth=0,backgroundcolor=shadecolor,skipabove=\baselineskip,innertopmargin=0]\begin{minipage}{\textwidth}\begin{alltt}}
{\end{alltt}\end{minipage}\end{mdframed}}

\newenvironment{tip}
{\vspace{\baselineskip}\marginlabel{Tip $\rightarrow$}\vspace{-1.4\baselineskip}\begin{mdframed}[linewidth=0.4pt,skipabove=\baselineskip,innertopmargin=0]\begin{minipage}{\textwidth}\relsize{-0.5}}
{\end{minipage}\end{mdframed}\vspace{\baselineskip}}

\renewenvironment{example}
{\vspace{\baselineskip}\marginlabel{Example $\rightarrow$}\vspace{-1.4\baselineskip}\begin{mdframed}[linewidth=0.4pt,skipabove=\baselineskip,innertopmargin=0]\begin{minipage}{\textwidth}\relsize{-0.5}}
{\end{minipage}\end{mdframed}\vspace{\baselineskip}}

% can also use:
% \seealso{}, \attention, \marginlabel{} before paragraphs to make notes in right margin.

\title{LibBi}
\author{Lawrence Murray}
\date{}

\makeindex

\begin{document}

\pagestyle{empty}

% title page
\begin{leftbar}

\vspace{3cm}

\fontsize{72pt}{92pt}\selectfont
LibBi

\vspace{6cm}

\fontsize{24pt}{30pt}\selectfont
User Guide \\
User Reference \\
Developer Guide

\vspace{6cm}

\fontsize{16pt}{24pt}\selectfont
Version 1.4.5

\vspace{1cm}

\end{leftbar}

% fineprint page
\newpage
\setcounter{page}{1}
\pagenumbering{roman}
\pagestyle{plain}

{\footnotesize
\begin{description}
\item[Developers]
  Lawrence Murray
\item[Contributors]
  Pierre Jacob \\
  Anthony Lee \\
  Josh Milthorpe \\
  Sebastian Funk
\end{description}
}

% contents
\newpage
\toccontents

% and the rest
\newpage
\setcounter{page}{1}
\pagenumbering{arabic}

\chapter{User Guide\label{User_Guide}}

\input{users}

\chapter{User Reference\label{User_Reference}}

\section{Models}
\input{models}

\section{Actions}
\input{actions}

\section{Blocks}
\input{blocks}

\section{Commands}

\input{build}
\input{run}
\input{common}
\input{clients}

\chapter{Developer Guide\label{Developer_Guide}}

\input{developers}

\nocite{*}
\bibliographystyle{abbrvnat}
{\small\bibliography{index}}

\begingroup \catcode`_=12 % allows bare underscores in index
\printindex
\endgroup

\end{document}
